\section{Поведение системы при отказе компонентов}

\subsection{Отказ сервиса лояльности}
В системе лояльности хранится информация о количестве бронирований и статусах клиентов (BRONZE, SILVER, GOLD).  
При отмене бронирования недоступность данного сервиса не блокирует критические операции, а следовательно запрос на отмену бронирования выполняется. Если сервис лояльности недоступен, пользователю возвращается ответ об успешной отмене. Запрос в сервис лояльности помещается в очередь внутри сервиса координатора и повторяется до успешного ответа от него.

\subsection{Отказ Kafka}
Все действия пользователей публикуются в брокер сообщений Kafka в виде событий (user-actions).  
Сервис статистики асинхронно считывает сообщения и сохраняет их в базу данных. Если Kafka недоступен, события не попадают в сервис статистики. При этом основные функции системы продолжают работать без ограничений. После восстановления Kafka накопленные сообщения из ее буфера восстанавливаются и доставляются в сервис статистики.
