\section{Защита от дублирования сообщений}

Для предотвращения повторной обработки сообщений реализован следующий механизм:
\begin{itemize}
	\item Каждое сообщение Kafka содержит поля topic, partition, offset.
	\item В таблице user\_actions создан уникальный составной индекс по этим трем полям.
	\item При повторном получении сообщения (например в случае, если сервис сохранил сообщение в базу, но не отметил его как полученное) попытка записи приведет к исключению.
	\item Исключение перехватывается и обрабатывается, сообщение помечается как обработанное, чтобы избежать бесконечной повторной обработки.
\end{itemize}
